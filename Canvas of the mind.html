<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas of the Mind</title>
    <!-- Use the Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Load Tailwind CSS for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #6366f1; /* Indigo-500 */
            --secondary-color: #e0e7ff; /* Indigo-100 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .canvas-container {
            position: relative;
            background-size: cover;
            background-position: center;
            border: 2px solid var(--primary-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        #drawing-canvas {
            display: block;
            touch-action: none; /* Prevents default touch behavior */
        }
        .tool-button {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.875rem; /* sm */
            font-weight: 600; /* semibold */
            transition: all 0.2s;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .tool-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        .tool-button.active {
            background-color: var(--primary-color);
            color: white;
            transform: scale(1.05);
        }
        .color-circle {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: transform 0.2s, border-color 0.2s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .color-circle:hover {
            transform: scale(1.1);
        }
        .color-circle.active {
            border-color: var(--primary-color);
            transform: scale(1.2);
        }
        .background-option {
            height: 80px;
            width: 120px;
            border-radius: 0.75rem;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            border: 3px solid transparent;
            transition: transform 0.2s, border-color 0.2s;
        }
        .background-option:hover {
            transform: scale(1.05);
        }
        .background-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        /* Starlit Cosmos Animation */
        @keyframes starlight {
            from { background-position: 0% 0%; }
            to { background-position: 100% 100%; }
        }
        .starlit-cosmos {
            background: radial-gradient(circle at center, rgba(255, 255, 255, 0.05), rgba(0, 0, 0, 0.7)),
                        repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08) 1px, transparent 1px, transparent 20px),
                        repeating-linear-gradient(-45deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.08) 1px, transparent 1px, transparent 20px),
                        repeating-radial-gradient(circle at 0 0, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.05) 1px, transparent 1px, transparent 10px);
            background-color: #0d0c1d;
            animation: starlight 30s linear infinite;
        }
        /* Custom modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 400px;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight">Canvas of the Mind</h1>
            <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">
                Close your eyes for a moment. Take a deep breath. Think about how you feel right now. Is it a color? A shape? A texture? Don't think too hard about it; just let the feeling come to you. When you're ready, open your eyes and use the canvas to show us what that feeling looks like.
            </p>
        </header>

        <main class="grid lg:grid-cols-3 gap-8">
            <!-- Left Sidebar: Tools and Options -->
            <div class="lg:col-span-1 bg-white p-6 rounded-2xl shadow-lg border border-gray-200 h-fit sticky top-8">
                <h2 class="text-xl font-bold mb-4 text-gray-700">Drawing Tools</h2>

                <!-- Color Palette -->
                <div class="mb-6">
                    <h3 class="text-md font-semibold mb-2 text-gray-600">Choose a Color</h3>
                    <div id="color-palette" class="flex flex-wrap gap-2">
                        <!-- Mood Palettes -->
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Calm</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-blue-500" data-color="#3b82f6"></div>
                                <div class="color-circle bg-cyan-500" data-color="#06b6d4"></div>
                                <div class="color-circle bg-indigo-500" data-color="#6366f1"></div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Anger</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-red-500" data-color="#ef4444"></div>
                                <div class="color-circle bg-orange-500" data-color="#f97316"></div>
                                <div class="color-circle bg-gray-900" data-color="#111827"></div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Confusion</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-purple-500" data-color="#a855f7"></div>
                                <div class="color-circle bg-yellow-400" data-color="#facc15"></div>
                                <div class="color-circle bg-lime-500" data-color="#84cc16"></div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Joy</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-yellow-300" data-color="#fde047"></div>
                                <div class="color-circle bg-pink-400" data-color="#f472b6"></div>
                                <div class="color-circle bg-lime-300" data-color="#d9f991"></div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Sadness</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-gray-400" data-color="#9ca3af"></div>
                                <div class="color-circle bg-blue-700" data-color="#1d4ed8"></div>
                                <div class="color-circle bg-slate-500" data-color="#64748b"></div>
                            </div>
                        </div>
                         <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Anxiety</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-teal-500" data-color="#14b8a6"></div>
                                <div class="color-circle bg-red-700" data-color="#b91c1c"></div>
                                <div class="color-circle bg-gray-600" data-color="#4b5563"></div>
                            </div>
                        </div>
                        <div class="flex flex-col items-center">
                            <h4 class="text-xs text-gray-500 mt-2">Love</h4>
                            <div class="flex gap-1 mt-1">
                                <div class="color-circle bg-red-400" data-color="#f87171"></div>
                                <div class="color-circle bg-pink-600" data-color="#db2777"></div>
                                <div class="color-circle bg-purple-400" data-color="#c084fc"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Brush Options -->
                <div class="mb-6">
                    <h3 class="text-md font-semibold mb-2 text-gray-600">Brush Style</h3>
                    <div class="flex flex-wrap gap-2">
                        <button id="brush-wide" class="tool-button bg-gray-200 text-gray-800" data-size="15">Wide</button>
                        <button id="brush-fine" class="tool-button bg-gray-200 text-gray-800" data-size="3">Fine</button>
                        <button id="brush-spray" class="tool-button bg-gray-200 text-gray-800">Spray</button>
                        <button id="eraser" class="tool-button bg-gray-200 text-gray-800">Eraser</button>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="mb-6">
                    <h3 class="text-md font-semibold mb-2 text-gray-600">Actions</h3>
                    <div class="flex flex-wrap gap-2">
                        <button id="undo" class="tool-button bg-gray-200 text-gray-800">Undo</button>
                        <button id="redo" class="tool-button bg-gray-200 text-gray-800">Redo</button>
                        <button id="save-button" class="tool-button bg-indigo-500 text-white">Save with Reflection</button>
                    </div>
                </div>

                <!-- Background Gallery -->
                <div>
                    <h3 class="text-md font-semibold mb-2 text-gray-600">Choose a Background</h3>
                    <div class="flex flex-wrap gap-2">
                        <div id="bg-default" class="background-option active" data-bg="default" style="background-color: white;"></div>
                        <div id="bg-urban" class="background-option" data-bg="urban-labyrinth" style="background-image: url('https://placehold.co/120x80/2c3e50/ecf0f1?text=Urban');"></div>
                        <div id="bg-cosmos" class="background-option starlit-cosmos" data-bg="starlit-cosmos" style="background-color: #0d0c1d;"></div>
                        <div id="bg-forest" class="background-option" data-bg="forest-clearing" style="background-image: url('https://placehold.co/120x80/34495e/ecf0f1?text=Forest');"></div>
                        <div id="bg-gradient" class="background-option" data-bg="soft-gradient" style="background-image: url('https://placehold.co/120x80/6366f1/e0e7ff?text=Gradient');"></div>
                        <div id="bg-geometric" class="background-option" data-bg="geometric-pattern" style="background-image: url('https://placehold.co/120x80/a5b4fc/c7d2fe?text=Pattern');"></div>
                        <div id="bg-ocean" class="background-option" data-bg="ocean-calm" style="background-image: url('https://placehold.co/120x80/1a496b/e0f7fa?text=Ocean');"></div>
                        <div id="bg-sunset" class="background-option" data-bg="sunset-haze" style="background-image: url('https://placehold.co/120x80/ff7e5f/feb47b?text=Sunset');"></div>
                        <div id="bg-vibrant" class="background-option" data-bg="vibrant-lines" style="background-image: url('https://placehold.co/120x80/ff00ff/00ffff?text=Vibrant');"></div>
                         <div id="bg-tranquil" class="background-option" data-bg="tranquil-watercolor" style="background-image: url('https://placehold.co/120x80/9e92ff/f0f8ff?text=Tranquil');"></div>
                        <div id="bg-chaotic" class="background-option" data-bg="chaotic-swirls" style="background-image: url('https://placehold.co/120x80/8b5cf6/ec4899?text=Chaotic');"></div>
                        <div id="bg-peaceful" class="background-option" data-bg="peaceful-sunrise" style="background-image: url('https://placehold.co/120x80/ffd166/ffffff?text=Peaceful');"></div>
                    </div>
                </div>
            </div>

            <!-- Main Content: Canvas and Reflection -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-2xl shadow-lg border border-gray-200 mb-8 p-4">
                    <div id="canvas-wrapper" class="canvas-container w-full aspect-video rounded-xl overflow-hidden">
                        <canvas id="drawing-canvas" class="w-full h-full"></canvas>
                    </div>
                </div>

                <!-- Reflection Section -->
                <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-200">
                    <h2 class="text-xl font-bold mb-4 text-gray-700">The Reflection</h2>
                    <p class="text-gray-600 mb-4">Now, give your drawing a name. What did you title your emotion, and why?</p>
                    <textarea id="reflection-text" rows="4" class="w-full p-4 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 transition-colors" placeholder="Type your thoughts here..."></textarea>
                    
                    <div class="mt-4 flex flex-col sm:flex-row justify-end gap-2">
                        <button id="share-button" class="tool-button bg-gray-200 text-gray-800">Save to Gallery</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Custom Modal for Messages -->
    <div id="message-modal" class="modal">
        <div class="modal-content">
            <p id="modal-text" class="text-gray-800 font-medium"></p>
            <button onclick="document.getElementById('message-modal').style.display='none'" class="mt-4 px-4 py-2 bg-indigo-500 text-white rounded-full hover:bg-indigo-600 transition-colors">Close</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvasWrapper = document.getElementById('canvas-wrapper');
            const canvas = document.getElementById('drawing-canvas');
            const ctx = canvas.getContext('2d');

            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            let brushSize = 5;
            let brushColor = '#000000';
            let brushType = 'pen'; // 'pen', 'spray', 'eraser'
            
            // History for undo/redo
            let history = [];
            let historyIndex = -1;

            // Function to resize canvas to fit its parent and prevent CLS
            const resizeCanvas = () => {
                const rect = canvasWrapper.getBoundingClientRect();
                canvas.width = rect.width;
                canvas.height = rect.height;
                // Redraw history after resizing
                redrawHistory();
            };

            const saveHistory = () => {
                // Clear any "undone" history
                if (historyIndex < history.length - 1) {
                    history = history.slice(0, historyIndex + 1);
                }
                history.push(canvas.toDataURL());
                historyIndex++;
            };

            const redrawHistory = () => {
                if (historyIndex >= 0) {
                    const img = new Image();
                    img.onload = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    };
                    img.src = history[historyIndex];
                }
            };

            const getMousePos = (e) => {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: e.clientX - rect.left,
                    y: e.clientY - rect.top
                };
            };
            
            const getTouchPos = (e) => {
                const rect = canvas.getBoundingClientRect();
                return {
                    x: e.touches[0].clientX - rect.left,
                    y: e.touches[0].clientY - rect.top
                };
            };

            // Drawing function
            const draw = (e) => {
                if (!isDrawing) return;
                
                let currentX, currentY;
                if (e.touches) {
                    const pos = getTouchPos(e);
                    currentX = pos.x;
                    currentY = pos.y;
                } else {
                    const pos = getMousePos(e);
                    currentX = pos.x;
                    currentY = pos.y;
                }

                ctx.lineCap = 'round';
                
                if (brushType === 'pen') {
                    ctx.lineWidth = brushSize;
                    ctx.strokeStyle = brushColor;
                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(currentX, currentY);
                    ctx.stroke();
                } else if (brushType === 'spray') {
                    const density = 50;
                    const radius = brushSize * 2;
                    ctx.fillStyle = brushColor;
                    for (let i = 0; i < density; i++) {
                        const offsetX = Math.random() * radius * 2 - radius;
                        const offsetY = Math.random() * radius * 2 - radius;
                        ctx.fillRect(currentX + offsetX, currentY + offsetY, 1, 1);
                    }
                } else if (brushType === 'eraser') {
                    ctx.lineWidth = brushSize;
                    ctx.strokeStyle = 'rgba(255, 255, 255, 1)';
                    ctx.beginPath();
                    ctx.moveTo(lastX, lastY);
                    ctx.lineTo(currentX, currentY);
                    ctx.stroke();
                }

                lastX = currentX;
                lastY = currentY;
            };

            // Event listeners for drawing
            const startDrawing = (e) => {
                isDrawing = true;
                if (e.touches) {
                    const pos = getTouchPos(e);
                    [lastX, lastY] = [pos.x, pos.y];
                } else {
                    const pos = getMousePos(e);
                    [lastX, lastY] = [pos.x, pos.y];
                }
            };

            const stopDrawing = () => {
                isDrawing = false;
                ctx.beginPath(); // Stops the path
                saveHistory();
            };

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseout', () => {
                if (isDrawing) {
                    isDrawing = false;
                    ctx.beginPath();
                    saveHistory();
                }
            });
            
            canvas.addEventListener('touchstart', (e) => { e.preventDefault(); startDrawing(e); }, { passive: false });
            canvas.addEventListener('touchend', (e) => { e.preventDefault(); stopDrawing(); }, { passive: false });
            canvas.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, { passive: false });
            
            // Initial save to history
            resizeCanvas();
            saveHistory();
            window.addEventListener('resize', resizeCanvas);

            // Tool and Color Selection
            const toolButtons = document.querySelectorAll('.tool-button');
            const brushButtons = document.querySelectorAll('#brush-wide, #brush-fine, #brush-spray');
            const colorCircles = document.querySelectorAll('.color-circle');

            // Set up initial active brush
            document.getElementById('brush-wide').classList.add('active');
            
            // Handle brush size and type selection
            brushButtons.forEach(button => {
                button.addEventListener('click', () => {
                    brushButtons.forEach(btn => btn.classList.remove('active'));
                    document.getElementById('eraser').classList.remove('active');
                    button.classList.add('active');
                    if (button.id === 'brush-wide') {
                        brushSize = 15;
                        brushType = 'pen';
                    } else if (button.id === 'brush-fine') {
                        brushSize = 3;
                        brushType = 'pen';
                    } else if (button.id === 'brush-spray') {
                        brushSize = 8;
                        brushType = 'spray';
                    }
                });
            });

            // Handle eraser selection
            document.getElementById('eraser').addEventListener('click', () => {
                toolButtons.forEach(btn => btn.classList.remove('active'));
                document.getElementById('eraser').classList.add('active');
                brushSize = 15;
                brushType = 'eraser';
            });
            
            // Handle color selection
            colorCircles.forEach(circle => {
                circle.addEventListener('click', () => {
                    colorCircles.forEach(c => c.classList.remove('active'));
                    circle.classList.add('active');
                    brushColor = circle.dataset.color;
                });
            });

            // Undo/Redo functionality
            document.getElementById('undo').addEventListener('click', () => {
                if (historyIndex > 0) {
                    historyIndex--;
                    redrawHistory();
                }
            });

            document.getElementById('redo').addEventListener('click', () => {
                if (historyIndex < history.length - 1) {
                    historyIndex++;
                    redrawHistory();
                }
            });

            // Function to save the combined image
            const saveCombinedImage = () => {
                const reflectionText = document.getElementById('reflection-text').value;
                const activeBackground = document.querySelector('.background-option.active');
                const bgName = activeBackground ? activeBackground.dataset.bg : 'default';

                // Create a temporary, off-screen canvas to merge the drawing and text
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                
                // Get the current background style of the canvas wrapper
                const bgStyle = window.getComputedStyle(canvasWrapper);
                const bgColor = bgStyle.backgroundColor;
                const bgImage = bgStyle.backgroundImage;
                
                // Set the dimensions of the new canvas
                tempCanvas.width = canvas.width;
                const textPadding = 20;
                const lineHeight = 20;
                const lines = reflectionText.split('\n');
                const textHeight = lines.length * lineHeight + textPadding * 2;
                tempCanvas.height = canvas.height + textHeight;
                
                // Function to draw the canvas content and text on the temporary canvas
                const drawContentAndText = () => {
                    // Draw the original canvas content on top of the background
                    const img = new Image();
                    img.onload = () => {
                        tempCtx.drawImage(img, 0, 0, tempCanvas.width, canvas.height);

                        // Draw the reflection text below the image
                        tempCtx.fillStyle = '#000000';
                        tempCtx.font = `16px 'Inter', sans-serif`;
                        let y = canvas.height + textPadding;
                        lines.forEach(line => {
                            tempCtx.fillText(line, textPadding, y);
                            y += lineHeight;
                        });
                        
                        // Convert the new canvas to a JPEG data URL and trigger download
                        const link = document.createElement('a');
                        const date = new Date().toISOString().slice(0, 10);
                        link.download = `MyEmotion-${date}.jpeg`;
                        link.href = tempCanvas.toDataURL('image/jpeg', 0.9); // 0.9 is the quality
                        link.click();
                    };
                    img.src = canvas.toDataURL();
                };

                // Fill the temporary canvas with the correct background first
                if (bgName === 'starlit-cosmos') {
                    // For the starlit-cosmos animation, just use a solid dark color
                    tempCtx.fillStyle = '#0d0c1d';
                    tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                    drawContentAndText();
                } else if (bgName === 'default') {
                    tempCtx.fillStyle = 'white';
                    tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                    drawContentAndText();
                } else {
                    const img = new Image();
                    img.crossOrigin = 'Anonymous';
                    // We can't use the URL from `bgImage` directly as it's not a valid cross-origin URL in all cases
                    // Instead, we use a map of the known background URLs
                    const backgroundUrls = {
                        'urban-labyrinth': 'https://placehold.co/1200x800/2c3e50/ecf0f1?text=Urban+Labyrinth',
                        'forest-clearing': 'https://placehold.co/1200x800/34495e/ecf0f1?text=Forest+Clearing',
                        'soft-gradient': 'https://placehold.co/1200x800/6366f1/e0e7ff?text=Soft+Gradient',
                        'geometric-pattern': 'https://placehold.co/1200x800/a5b4fc/c7d2fe?text=Geometric+Pattern',
                        'ocean-calm': 'https://placehold.co/1200x800/1a496b/e0f7fa?text=Ocean',
                        'sunset-haze': 'https://placehold.co/1200x800/ff7e5f/feb47b?text=Sunset',
                        'vibrant-lines': 'https://placehold.co/1200x800/ff00ff/00ffff?text=Vibrant',
                        'tranquil-watercolor': 'https://placehold.co/1200x800/9e92ff/f0f8ff?text=Tranquil',
                        'chaotic-swirls': 'https://placehold.co/1200x800/8b5cf6/ec4899?text=Chaotic',
                        'peaceful-sunrise': 'https://placehold.co/1200x800/ffd166/ffffff?text=Peaceful',
                    };
                    img.src = backgroundUrls[bgName];
                    img.onload = () => {
                         tempCtx.drawImage(img, 0, 0, tempCanvas.width, canvas.height);
                         drawContentAndText();
                    };
                    img.onerror = () => {
                        console.error('Failed to load background image. Using solid color.');
                        tempCtx.fillStyle = '#f3f4f6'; // Fallback to a light gray
                        tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
                        drawContentAndText();
                    };
                }
            };
            
            // Save Button
            document.getElementById('save-button').addEventListener('click', saveCombinedImage);
            // Share Button now does the same thing
            document.getElementById('share-button').addEventListener('click', saveCombinedImage);

            // Background Gallery Selection
            document.querySelectorAll('.background-option').forEach(bgOption => {
                bgOption.addEventListener('click', () => {
                    document.querySelectorAll('.background-option').forEach(opt => opt.classList.remove('active'));
                    bgOption.classList.add('active');
                    
                    const bgName = bgOption.dataset.bg || 'default';
                    
                    // Reset existing background styles
                    canvasWrapper.style.backgroundImage = 'none';
                    canvasWrapper.style.backgroundColor = 'white';
                    canvasWrapper.classList.remove('starlit-cosmos');
                    
                    if (bgName === 'starlit-cosmos') {
                        canvasWrapper.classList.add('starlit-cosmos');
                    } else if (bgName === 'default') {
                        // The background color is already set to white
                    } else {
                        // Use a placeholder URL for the background
                        const placeholderUrl = bgOption.style.backgroundImage.slice(5, -2);
                        canvasWrapper.style.backgroundImage = `url('${placeholderUrl}')`;
                    }
                });
            });
        });
    </script>
</body>
</html>
